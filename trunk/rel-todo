 
 0.7

----

   o python extensions -> all molecule -> fit protein is not 
     accepting the refined coordinates correctly

   o flev some ligands with standard build ::: 1

   o Old backups dialog should be a transient. Could be tricky.
     Puntable ::: 0.5

   o in multi-residue torsion for normal protein chain, , N->C is
     present (should it be? (I think yes, but with warning icon (and
     tooltip "This is the peptide bond")) but phi and psi, CA-N
     and CA-C are not. ::: 1

   o double bonds stick should have end-caps. ::: 1

   o check that pisa assemblies and interfaces work - laptop and
     desktop ::: 1

   o  -I/home/paule/autobuild/build-coot+rdkit-pre-release-gtk2-python/include/python2.7 -DUSE_PYGTK -g -O2 -MT callbacks.o -MD -MP -MF .deps/callbacks.Tpo -c -o callbacks.o ../../coot/src/callbacks.c
../../coot/src/callbacks.c: In function ‘on_dynarama_window_configure_event’:
../../coot/src/callbacks.c:9690:3: warning: passing argument 2 of ‘resize_rama_canvas’ from incompatible pointer type [enabled by default]
../../coot/src/c-interface.h:4092:6: note: expected ‘union GdkEvent *’ but argument is of type ‘struct GdkEventConfigure *’
mv -f .deps/callbacks.Tpo .deps/callbacks.Po
/bin/sh ../libtool --tag=CXX   --mode=link g++ -DPKGDATADIR='"/home/paule/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot"' -DPACKAGE_LOCALE_DIR='"/home/paule/autobuild/build-coot+rdkit-pre-re

------

  o "Mutate DA to DT and C7 is missing" - Sabine Schneider ::: 1

* Done

  o Fix TER records on mutating a base [James Parker] ::: 2

* Done.

  o DNA in sequence view [Miguel Ortiz Lombardia] ::: 1

* Done

  o Other DNA problem: mutation/adding Ts to DNA? ::: 2

* Not as far as I can see - get Miguel to use the new version. Done.

  o Recent structures browser (scheme version) ::: 8

* Done.

  o Load ASN from SBASE using Lidia menu.  Molecule has thick bonds to
    hydrogens. ::: 0.5

* Fixed now that SBASE residues are hetgroups, I think.

  o Fix renumbering problem [John Berrisford] ::: 2

* Done.

  o consider adding displayed geometry -> Distances to session file. ::: 1

* Done.

  o Is PISA in 6.2 up to date enough to enable the menu in Coot? ::: 0.5

* Yes.

  o Don't drag last-placed bond after button-up in lbg ::: 0

* Nothing to do.  It's fixed already, it seems.

  o Picking atoms in Jones mode needs to pick only CAs. ::: 0.5

* Done.  Trivially set pick mode correctly for the display mode in atom_pick().

  o need tlc->name function and use it in add solvent molecules ::: 0.5

* Done


  o Add nucleotide to 3' end - Sabine Schneider.  Check Kevin's fix -
    needs test ::: 1

* Seems good.

  o display a molecule, activate distance, now try to pick atoms in space 
    -> (undisplayed) symm atoms get picked!  Wrong  ::: 0.5

* Done - add check that symmetry is displayed.

  o in 3s4w the Bonding in CA mode is wrong at residue 411.   ::: 1

* Fixed.

  o get rid of this debugging:

Adding monomer torsion restraint: 2 1 8 6 angle -155.341 esd 20 period 3
Adding monomer torsion restraint: 2 1 0 11 angle 60 esd 20 period 3
Adding monomer torsion restraint: 3 2 1 8 angle 180 esd 20 period 3
Adding monomer torsion restraint: 4 3 2 1 angle 60 esd 20 period 3
Adding monomer torsion restraint: 11 4 3 2 angle -60 esd 20 period 3
Adding monomer torsion restraint: 11 4 5 12 angle 65.068 esd 20 period 3
Adding monomer torsion restraint: 0 11 4 3 angle 60 esd 20 period 1
Adding monomer torsion restraint: 14 15 18 19 angle 180 esd 15 period 3
Adding monomer torsion restraint: 20 21 24 25 angle 180 esd 15 period 3
Adding monomer torsion restraint: 21 24 25 26 angle 180 esd 15 period 3
Adding monomer torsion restraint: 24 25 26 28 angle 0 esd 30 period 2
Adding monomer torsion restraint: 29 30 33 34 angle 180 esd 15 period 3
Adding monomer torsion restraint: 30 33 34 36 angle 0 esd 30 period 2

* Done.

  o "Save coordinates file name selector" window should be a transient
    (Andrew Sharff).  

* It is, AFAICS.  Hmmm!

  o sphere refine 1284 A of 3zr5 -> fails to find link bonds and
    GSL_NOPROG.  (Try NAGs in other proteins, seems this problem is not
    unique to this structure? (but not everything! Hmm!))  Try 3sq6
    first, that has just this message:

    WARNING:: dictionary vs model problem? We didn't find the bonded
    linking atoms : C1 : : ND2:
 
    and refines to completion.

* Yay already fixed - presumably link code fixups from a week or two
   ago.  Stephen Graham structure?


  o match ligand torsions for ligand in 3oho.  Close (AFAICS) but no
    cigar - we need to add in a bond order check?  ::: 1

* Seems OK now.

  o inhibitor in 3p5k fails on torsion matching. ::: 0.5

* Fine now.

  o rework get-monomer() to be cleaner and use the prefer_python system. ::: 1

* Done.

  o update go to atom on merge water chains. ::: 0.5

* Done - simply add call to update go to atom window after change_chain_id().

  o double reading/displaying (or modification?) of HET residues? ::: 1

* It was - and the get-monomer calling it twice is fine (it re-centres).

  o Does RCrane work? ::: 0.5

* Yes it does - out the box.

  o try to make a difference map by making an average map with scale
    -1 for the second map.  Does it work? ::: 0.5

* Is fine.  PEBKAC I suspect.

  o problems bonding problem-x.pdb (marmoset) - no dictionary,
    cyclobutane. ::: 0.5

* No problem, as it turns out.  PEBKAC - DRG exists in the monomer
  library/SBase already (and the atoms of problem-x.pdb do not match
  the names of DRG).

  o SS: Fix symmetry file names ::: 0.5

* Done. And cleanup sym_trans_t::str() and use 1-indexed not zero index.


  o Unusual Rotamers on 3amy - I guess I mean: don't try to find
    rotamers for AGI, EDO etc. ::: 2

* is_standard_amino_acid_name() introduced.

  o Accept/Reject dialog is not opening where I left it on previous
    usage (not previous session, even!) ::: 1

* Changed.  I give up.

  o Fun: make another version of the dots() interface so that it will
    accept a list of residue specs.  Use atomic radii from energy lib
    or some such.  ::: 1

* Done.

  o Fix up transform_map by sorting by distance from the target centre
    the grid points that have new density . ::: 2

* Done. 

  o place atom at pointer. Use tutorial data from clean.  Does the
    water go into the correct molecule? (or does it go into Pointer
    Atoms molecule?) ::: 0.5

* It's fine.

  o Fix lighting for solid env distances ::: 0.5

* Simple enable GL_COLOR_MATERIAL.

  o check that probe works ::: 0.5

* It does if you use 2.12.*
* not checked with local updates though...


  o Fix lighting for solid generic objects - needs translation? (atom
    pick) problem addressing. ::: 0.5

* Done.

  o Fix distorted axis with wide screen. ::: 1

* Done.

  o Downloading pdbe data needs to be silent (in scheme) in case the
    user has the coot scheme scripting window open (threading issues).  
    ::: 2

* Looks good.

  o download 3s9q from pdbe - crashes (not crash when files cached)  :: 2

* Done.

  o Fix cif torsions and chiral, no loop single entry ::: 1

* Done.

  o ball-and-stickify on G100 P (ASN) in 3u2s fails (ins code not
    taken into account) ::: 0.5

* Done. mmdb_string() needed fixing to add .ins_code.

  o Fix recentering by shift ::: 0.5

* Done. 

  o LINKR recognition (draw it)  ::: 1

* Done.

  o test and use new mmdb ::: 1

* Done.

  o CCP4-based integrated path for FLEV ::: 6

* Looks good.

  o Make sure ligands work with prodrg ::: 4

* Seems OK.

  o put helix, pyranose pdbs into pdb-templates directory ::: 1

* Done.

  o consider the exporting of frames and using ffmpeg to make a movie... ::: 1 

* Done.

  o "Don't recentre" button doesn't work with Modern fileselector ::: 0.3

* It works fine.  PEBKAC.

  o It would be nice if "triple refine" worked on 2 residues (e.g. 
    we are at the end of the chain).  ::: 1

* Done.  

  o export a map fragment (xmap -> nxmap conversion and export_nxmap()) ::: 2

* Done.

  o draw hydrogens mode is ignored for hetgroups. ::: 0.5 

* Done.

  o try to regularize pyranose-pyranose-via-ALPHA1-6.pdb, breaks bond,
    doesn't find glyco linkage ::: 1

* Done - yikes!

  o valgrind on reading 1alz ::: 0.5

Molecule 0 read successfully
Debug:: there were 5 types with no dictionary 
trying to dynamic add: FOR
INFO:: using standard CCP4 Refmac dictionary to search for FOR
==7395== Invalid read of size 1
==7395==    at 0x66E8E77: coot::protein_geometry::try_dynamic_add(std::string const&, int) (protein-geometry.cc:3684)
==7395==    by 0x580EF4: handle_read_draw_molecule_with_recentre (c-interface.cc:534)
==7395==    by 0x5A03F1: on_ok_button_coordinates_clicked (callbacks.c:264)
==7395==    by 0x1228EE7D: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A7708: ??? (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A8E85: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A96F2: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x1074B64A: ??? (in /usr/lib/libgtk-x11-2.0.so.0.2000.1)
==7395==    by 0x1228EE7D: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A7708: ??? (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A8E85: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A96F2: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==  Address 0x1cf58108 is 24 bytes inside a block of size 26 free'd
==7395==    at 0x4C26DCF: operator delete(void*) (vg_replace_malloc.c:387)
==7395==    by 0x12E67128: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() (in /usr/lib/libstdc++.so.6.0.13)
6.0.13)
==7395==    by 0x66E8E76: coot::protein_geometry::try_dynamic_add(std::string const&, int) (protein-geometry.cc:3683)
==7395==    by 0x580EF4: handle_read_draw_molecule_with_recentre (c-interface.cc:534)
==7395==    by 0x5A03F1: on_ok_button_coordinates_clicked (callbacks.c:264)
==7395==    by 0x1228EE7D: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A7708: ??? (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A8E85: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A96F2: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x1074B64A: ??? (in /usr/lib/libgtk-x11-2.0.so.0.2000.1)
==7395==    by 0x1228EE7D: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.2514.0)
==7395==    by 0x122A7708: ??? (in /usr/lib/libgobject-2.0.so.0.2514.0)

* Done - crazy string/char manipulation...

  o Fix crash-catcher script to work with pythonized coot ::: 2

* Done.

  o How do I deal with the responses correctly in the lidia file
    dialogs? ::: 0.5

* They are behaving as normal, it seems.

  o Eleanor: do MSEs have missing atoms? ::: 1

* Done.  No, OXTs - ignored now.

  o Boaz torsion problem ::: 2

* Added test for dictionary molecule coordinates as zeros, thus forcing libcheck.

  o Rename old LIGs on reading a new one. ::: 2 

* Handled differently - now an atom name check an non-autoloading.

  o Lothar crash, Jack Sack crash.  Same?

* Bernhard fix.

  o Search for difference map peaks - sigma check. ::: 0.5

* Done.


   o Does this need looking at? (mogul branch):

   called get_radio_button_in_scroll_group() with dialog 0x3995710 and imol_this 17

* Done.

   o and map level (top right) (from a search map) was in sigma

* Done

  o JLigand interface ::: 3

* Done.


   o Also just noticed – for the maps section of the display menu, the
   right hand button is ‘delete molecule’ not ‘delete map’ or delete
   object’

* Done.

  o BN:

    Your water validation routine not surprisingly flags nearly all
    waters as outliers if you have hydrogen atoms on your pdb file.
    Any way to make the validation routine ignore the hydrogen and
    just flag heavy atom close contacts.

                                                ::: 0.5
 
* Done

  o crash problems here?

   run python command:
	graphics_general_key_press_hook(269025067)"

* No.

 
   o Memory leak on fit protein - Ed Pozharski ::: 2

* Done.

   o draw oxygen correctly: 1a6m ::: 0.5

* Done 

   o sync CODE FILE with jligand. ::: 1

* Needs testing.

   o Boaz: deleting waters crash ::: 4

* Gone. Fixed? Presume so.


   o Stu Fisher

       We noticed a strange bug in the recent versions of coot. Since
       upgrading to 0.7-pre (3832), water molecules (with hydrogens,
       or in our case D2O as we are refining neutron structures) are
       no longer shown as bonded, they just show up as three
       crosses. 

* Done.  Check with 3ins.  Hmm.. bonds to Ds are now thick

   o JED: 

     1. go to find waters
     2. set min 2.4, max 12
     3. find some waters
     4. open find waters window again
     -> min and max values are swapped.

    Bug?

* Can't reproduce - ignore (was old version, I think)

   o Does crash catcher work - on RH5 say? ::: 1

* Yes.

   o are the charges correct on 4fl6?  The surface looks too red...

* looks fine.

   o 1x8b alt conf makes bond orders disappeared.

* Done.

   o read in components-PH2.cif and use Display mananger to delete the
      molecule. ::: 0.5

* No.  This is hardly a problem - it creates an empty molecule 0.


   o Does crash catcher work - on RH5 say?  ::: 0.5

* Fixed

   o 1x8b alt conf makes bond orders disappeared.  ::: 1

* Done


   o validate -> align vs pir fails if target molecule is not first? ::: 1


* No, it's fine - there is a wrapper that causes problems.  Revisit some other time.

   
   o Test (and add?) SMILES -> 2d via prodrg ::: 2

* Really?  No.

   o Steven Sheriff distances ::: 2

* Done.

   o Make non-guile build and check fit protein and rama fit functions. ::: 2

* Seems good to me.

   o Test "View in Lidia" via prodrg - where are the hydrogen bonds? ::: 2

* Done.

   o Fix PISA interfaces. ::: 3

* Done - python too.
 

   o run get pdbe structure for 2 different ligands (running refmac twice).
     ::: 2

* Done.

   o citing coot needs to be udated in the manual

* Done.

   o for density figure, white background, dark density, screenshot complains? Yes ::: 1

* Done.

   o extend map to model correlation by addeding a parameter of atom selection:
     main-chain
     side-chain
     all-atoms
     side-chain-excluding-CB   
     ::: 2

* Done.

   o seth harris: low res add-terminal residue with settings new residue still wanders?


* No.  It's fine.


   * is SCM run_python_command(const char *python_cmd) working properly?
     Py_XDECREF() call causes a crash. ::: 0.5

* I think not.  Commented.


   select rotamer alt conf window
      new alt conf occupancy frame auto expands - it should not.

* Done

   * lidia should work ::: 0.5 

* Done.

   o try adding many GOLs (for example).  Do they go to different chains?
     Maybe we need to start and stop again to activate that problem? ::: 1

* Done.


   o HJ:

    I've tested and build ideal DNA with Ts followed by simple mutate
    one of those to something else now doesn't remove C7 (i.e the
    opposite issue to that reported on the list). Of course this will
    be a much less common scenario than mutating from C to T and
    wondering where the C7 is but it should probably be on the todo
    list. 

   Write a failing test.

    ::: 2 

* Done

   o select rotamer should not pop up over the middle.  ::: 1

* Done.



   o Cancel on add alt conf should delete the alt conf that was just
     added.  It's an undo, I think. ::: 1

     g_object_set_data() and g_object_get_data()

* Done.
