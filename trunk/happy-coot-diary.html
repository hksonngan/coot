<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <head>
	<title>The Happy/Coot Developer Diary</title>
	<!-- Changed by: Paul Emsley, 20-May-2008 -->
      </head>

  <body>
    <h1>The Happy Coot Developer Diary</h1>

<hr>
<p>Tue May 20 20:18:04 BST 2008

<p>Fixed up the flying hydrogens problem today (apparent after
undoing).

<p>Things are moving forward on the Mac front... I am doing a fink
install coot as we speak.  I intend to use that in the daily builds
and put the Mac snapshot pre-released on the web site too.

<p>YSBL web site has been down today causing some disgruntlement
amongst users who want their (daily? :) dose of fresh Coot.

<p>Hardy comes with a GCC 4.3 for testing.  4.3 is not happy with way
mmdb is used in Coot.  I am corresponding with Eugene Krissinel about
how to resolve this.


<hr>
<p> Sat May 17 11:40:47 BST 2008 

<p>Back from Boston/Harvard and Beijing.  Lots of mails to deal with.

<p>As a result of this trip, I am much more committed to getting things
working on the Mac.  I think I will make a stand-alone "coot-only" 
fink-based installation.

<p>Both Harvard Medical School and the Institute of Biophysics
(Beijing) tutorials were completely Mac-based.  In the Coot tutorials
at the IBP, the X11 on the Macs crashed about 30 times in a 3hr
session. Not good.  Bad, in fact.

<p>Something interesting (for me) became apparent.  Several of the
students on the course had used Coot before, and they fired up Coot
and loaded the tutorial files and started doing the modifications
faster than I'd seen before at other tutorials.  However, as soon as
we started talking about features that were not completely
discoverable (e.g. single atom drag, over-dragging, auto-zone) the
pace slowed down dramatically.  Hit a brick wall in fact.  These
features are extensively described in the documentation, but these
Coot users just didn't know about them.  So I need to think about
making them more obvious.  If possible.

<p>Having tried a recent Coot on the Mac though, I did discover a
couple of problems with display lists - and fixing one of those caused
a resolution of the testing problems on the Ubuntu build host.  So
that is cleaned up at last, hoorah.

<p>I installed Hardy this morning, I am typing this on Hardy now (in
vi - as I am waiting for xmemacs to download and install).  Also,
installing Coot dependencies to see if compiz is compatible with Coot
yet....

<p>Baah, no.  It isn't.  Lot's of flashing/blanking of the windows and
misdrawing of the z-order.  OK, desktop effects off :-(.

<p>But at least I can use xemacs now.

<p>Incidentally, the ability to display the key bindings in a GUI was
a hit, it seems.

<p>Coot compiles out of the box on Hardy (GCC 4.2.3).

<hr>
<p>Sat May  3 11:39:54 EDT 2008

<p>The static key bindings are now displayed in a dialog.

<hr>
<p>Sat May  3 11:39:44 EDT 2008

<p>Now that the web page build analyser is in place (how did I live
without it?), it has become necessary for me to more frequently be
able to build Coot on the old/standard Coot machine (GTK1 with Python
on Red Hat 8).  I've been wanting to be able to do the build "from a
one-liner" for a long time, the "build status " web page was the thing 
that broke the camel's back (as it were) and I decided to put some 
effort into making it happen.

<p>Previously, I'd been logging in through the firewall to the build
host and running the command there - slightly tedious.  Now, I knew that 
expect can handle that sort of thing for us.  However, I was not going to program
in tcl - no way, so the Don Libes version was not an option.  What's
left? Guile.  Let's give that a go.

<p>So, I tried for about an hour or so - probably more - but was not
making headway.  The documentation was spare and only a few
examples. There seemed to be some problem with pseudo terminals over
ssh.

<p>OK, what else? Python?  Python has expect?

<p>(google google).. oh yes, it does.  Pexpect, it's called.

<p>Within 20 minutes of downloading it, I'd got it doing just what I
wanted.  Pexpect was trivial to install, fully featured, well
documented and easy to use.  The result was just a few lines of code,
in fact.  I grudgingly admit that python/pexpect was a much better
solution than using guile.

<hr>
<p>Thu May  1 01:18:05 BST 2008

<p>Builds back to normal... (although the build hosts are dropping
like flies (now the RFC6 machine has gone west)).

<p> The key bindings - which are dynamic, of course - can now be
displayed in a gui dialog that is activated from the Extensions menu.
I need to add the static key bindings there too, I think.

<p>Bernhard and I are experimenting with/implementing a system to call
python functions from scheme and vice versa.  And have the return
values converted in the process.  The new side chain assignment
interface that he wrote (in Python) will be used that way.

<p>I write this from a bed and breakfast bed near Harvard Yard - I
flew to Boston today. Easy trip.  Now, I discover, immigration wants a
to scan all fingers for finger prints...

<hr>
<p>Sun 27 Apr 11:05:44 2008 BST

<p>Oh, ha!  This is what I saw on checking the builds this morning:

<p> <a
href="http://www.biop.ox.ac.uk/emsley/pictures/various/Build-Summary-bad.png"><img
src="http://www.biop.ox.ac.uk/emsley/pictures/various/Build-Summary-bad-small.png"></a>.

<p>Yikes! a screen full of failure.  I'd forgotten to update the test
for key-bindings (I'd changed the function so that the bindings take a
name string, but not also updated the test). Fixed now.

<p>Sad to say I won't have much time to examine non-trivial items on
the TODO list for 0.5 until after the ACA.  I guess I'll have to push
back the release again.  I hadn't sufficiently accounted for
meetings/courses and other things.  Baah.


<hr>
<p>Sat Apr 26 05:01:19 BST 2008

<p>Leaving for home in a couple of hours.  Looking forward to getting
back and trying Hardy (I'll have to wipe out an Edgy to do it).


<hr>

<p>Fri Apr 25 22:12:16 BST 2008

<p> Just finished Finnish Bioxhit course (Oulu).  Was good (for me at
least).  I utterly broke the key bindings in the last presentation (in
an attempt to make a GUI that displayed them).  Bah.  With just one
minute more preparation, I could have fixed it.  Anyway, it works now
(of course) and has been added to the Extensions menu.

<p>I have some photos somewhere.

<p>The Fedora Core 6 binaries are no longer being built - that's
because the FC6 machine in York was upgraded to a F8 machine :-(.

<p>Also, possibly found why the Coot binaries became very unportable
when python was introduced.  Needs testing.

<p>After about 2 years of being broken, I fixed up the script that
converts svn to source code tar file while I was here (a stupid typo
in setting $PATH).

<p>However, the release (0.5) critical features has not been reduced
in about a month.  Badness, I've had to push back the release date a
month.

<p>I note that Bernhard has done something interesting with the icons
in the python extensions and I hope/think that this makes them
anti-aliased.  It would be nice to get the currently ugly icons fixed
up at last.

<hr>
<p>Fri Mar  7 17:57:17 GMT 2008

<p>I gave up trying to compile Gtk2+ from scratch.  Just too hard.
Now the build system of Coot requires Gtk+ 2.4 or better.  That seems
to be doing the trick.  I am using the "simple" build script to build
Fedora Gtk2 binaries in York.

<p>The molecule array to molecule vector transformation was a success.
Thank goodness for the test suite, which tripped over most of the bugs
(not all, it must be said).

<p>Recently, I have added Scheme and python interfaces to the getting and
setting of the monomer restraint information.  It was easier than I
thought it was going to be, (I expected it to be tricky and lengthy,
and in fact is was just lengthy).  Now this needs a GUI, which again I
suspect will be both lengthy and tricky to implement (taking more than
a day).

<p>"Additional Representations" are in the works too - this has taken a
bit of internal surgery - as I suspected, but it is OK elegance-wise.
I've currently got it working from the scripting layer.  Now I need to
create a gui so that the user can define a new representation by
filling in entry boxes.  Also, a gui to remove (undisplay)
representations.

<p>Also, the key binding mechanism has changed today.  Now there is an
external function add-key-binding which adds [a key number (currently)
and a thunk] to an association list (*key-bindings*).  Now
graphics-general-key-press-hook tests the key vs the association
list.  Much cleaner.

<p>Yesterday, I added a function "Save dialog positions" which saves a
state file and extracts from that the dialog positions and adds them
to the .coot file in $HOME.

<p>I learnt the other day of a Chemical Components dictionary
distributed by the PDB.  I tried to get Coot to read it (it has more
than 5000 entries and over 1 million lines) but it failed.  That was
due to a line length limitation in mmdb's mmCIF parser it turned out.
Hopefully that will be resolved soon.  When it is, we will be able to
instantaneously (more or less) beam in any of those Components.
That'll be cool...

<p>We have a new splash screen for 0.5-pre.  From an actual photograph.

<hr>
<p>Thu 31 Jan 14:15:27 2008 GMT

<p>Back to "blogging", now that new system arrangements are somewhat
better.

<p>Two major projects going on at the same time.  One is to move the
molecules array to a vector.  Which means that there is no limit now
to the number of molecules that you can display.  Previously there was
a fixed limit of 50, and Coot would try to dynamically resize if you
went over that limit.  That was inelegant.  I've been meaning to do
this change for years.

<p>The other project is to get "Gtk+2 + python" binaries to autobuild.
What an utter pain this is turning out to be.  The package stack to
get Gtk+2 to build is about 10 packages (and counting) of twisty
inter-dependencies.  The dependencies for PyGtk are only slightly
better.  And I'm trying to get this to build from one script across
all platforms. Very tedious.

    <hr>
    <address><a href="mailto:paul dot emsley at bioch ox ac uk">Paul Emsley</a></address>
<!-- Created: Fri Jul 15 09:20:45 BST 2005 -->
<!-- hhmts start -->
Last modified: Thu May 22 22:52:11 BST 2008
<!-- hhmts end -->
  </body>
</html>
