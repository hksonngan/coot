
To compile guile etc for gtk2:


prfx=$HOME/guile-1.8.1
wget libtool-1.5.22.tar.gz
cd libtoo-1.5.22
./configure --prefix=$prfx
make 
make install

wget guile-1.8.1.tar.gz
cd guile-1.8.1
./configure --prefix=$prfx CFLAGS=-I$prfx/include LDFLAGS=-L$prfx/lib
# on cycle at least, we need to stop the optimization:
./configure --prefix=$prfx "CFLAGS=-I$prfx/include -g" LDFLAGS=-L$prfx/lib
make 
make install

wget guile-gtk-2.0.tar.gz
cd guile-gtk-2.0
./configure --prefix=$prfx --without-gtkgl

 --------
  
   Things to fix before 0.3.2

   o Disappearing NCS ghosts on changing NCS master 

   o Stereo buttons need to be fixed

   o transform-map


   o Fix text widget in Sequence reading code (e.g. Fit Loop)

* Done.

   o Residue Info edits not being applied

* Done.

   o Delete a View number

* Done.

   o Save views to view file.

* Done.

   o Colour by B-factor

* Done

   o Colour by occupancy

* Done

   o Fix text widget in About 

* Done.

   o Alt confs fly apart in regularization of ligands.

* Done.

   o CNS map reading

* Done.

   o CNS data reading

* Kevin says leave it.  Fine.

   o Juergen's bad map

* Hand off to Kevin, bad map.

   o Put a file selector on the shelxl refine interface.

* Done.

   o Spin View 

* Done.

-------

# gtkglext:
wget "http://downloads.sourceforge.net/gtkglext/gtkglext-1.2.0.tar.gz?modtime=1139081517 & big_mirror=1"


# make sure when you compile guile-gtk-2.0, you pick up the right
# guile in your path (i.e. 1.8.x) otherwise libguile will be stuck in
# the guilegtk.la file and it wil cause a mess.


 ----- 
Sat Apr 28 16:21:54 BST 2007

   Those who compile with gtk2 need to regenerate the interface files
   coot_wrap_guile.cc and coot_wrap_guile_pre.cc by runing swig
   (delete them and make)


----
Wed May  2 11:20:29 BST 2007

   for shelx molecules:

   symmetry-related hydrogens don't appear (they flash off)

----
Wed May  2 15:40:02 BST 2007

	Residue info edits need testing.

----
Thu May  3 10:26:10 BST 2007

   intelligent next atom should consider insertion codes.
   (how tedious).

------
Wed May  9 13:54:04 BST 2007

   Dirk Kostewa:
   overblend for electron density?


-----
Thu May 10 16:03:56 BST 2007

   How should "Check for updates" work.

   In scheme, of course

   It should know the current coot-version

   It needs to get the latest stable relesed version and 
   the release notes for that.

   So the release notes should be on the web site.  I think that they
   are...

   So it needs to get the current stable release version (a string)
   from the web site.  How shall that be done?

      get the stable release binary list web page.  Search as we do
      for the latest coot version as we do in the build-it file (that
      involves awk).

   Then, if there is a new release, get the release notes file and put
   the contents into a scrolled text window.

-----

trying to run render without render in path:


rendering ray trace number: 0
rendering ray trace number: 1
rendering ray trace number: 2
rendering ray trace number: 3
done raytrace.
calling render...
calling display...
((safe_scheme_command) Error in proc: key:  system-error  args:  (execlp ~A (No such file or directory) (..... scm_catch done 
scm_catch returns: 20152

2)))
..... scm_catch done 
scm_catch returns: #<unspecified>

Xlib: unexpected async reply (sequence 0xb9f30)!
Xlib: unexpected async reply (sequence 0xb9f4a)!
Xlib: unexpected async reply (sequence 0xb9f4b)!
Xlib: unexpected async reply (sequence 0xba0b6)!
Xlib: unexpected async reply (sequence 0xba0f1)!
Xlib: unexpected async reply (sequence 0xba0f3)!
lt-coot-real: Fatal IO error 14 (Bad address) on X server :0.0.

Some deprecated features have been used.  Set the environment
variable GUILE_WARN_DEPRECATED to "detailed" and rerun the
program to get more information.  Set it to "no" to suppress
this message.
ObjectCache: Leaked 0002 refs to <P 31 2" Nuvw = ( 240, 240, 132)>
ObjectCache: Leaked 0002 refs to <P 31 2">
47.510u 14.504s 12:56.93 7.9%   0+0k 0+0io 160pf+0w


interesting!


------


  how about a "density at point" function exported to the scripting
  layer.  Then the "delete atoms below a certain level" can be done in
  scheme.


-----
Sun May 13 13:33:46 BST 2007



INFO:: There were 2 maps contributing to the average
INFO:: rescaling by 0.5
==4884== 
==4884== Invalid read of size 2
==4884==    at 0x824D42B: molecule_class_info_t::ncs_averaged_maps(clipper::Xmap<float> const&, float) (molecule-class-info-ncs.cc:672)
==4884==    by 0x824D8ED: molecule_class_info_t::make_dynamically_transformed_maps(int, short, float) (molecule-class-info-ncs.cc:472)
==4884==    by 0x813EB8B: make_dynamically_transformed_ncs_maps (c-interface-ncs.cc:299)
==4884==    by 0x813F5A1: make_dynamically_transformed_ncs_maps_by_widget (c-interface-ncs.cc:374)
==4884==    by 0x81E5C04: on_ncs_maps_ok_button_clicked (callbacks.c:5746)
==4884==    by 0x509D9D8: g_cclosure_marshal_VOID__VOID (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x509062A: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A1102: (within /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A2626: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A27E8: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x4C32162: gtk_button_clicked (in /usr/lib/libgtk-x11-2.0.so.0.1000.11)
==4884==    by 0x4C33DAD: (within /usr/lib/libgtk-x11-2.0.so.0.1000.11)
==4884==  Address 0x777C2E8 is 0 bytes after a block of size 522,720 alloc'd
==4884==    at 0x4022DC5: operator new(unsigned) (vg_replace_malloc.c:163)
==4884==    by 0x824EBB3: std::vector<short, std::allocator<short> >::_M_fill_insert(__gnu_cxx::__normal_iterator<short*, std::vector<short, std::allocator<short> > >, unsigned, short const&) (new_allocator.h:88)
==4884==    by 0x824CE08: molecule_class_info_t::ncs_averaged_maps(clipper::Xmap<float> const&, float) (stl_vector.h:658)
==4884==    by 0x824D8ED: molecule_class_info_t::make_dynamically_transformed_maps(int, short, float) (molecule-class-info-ncs.cc:472)
==4884==    by 0x813EB8B: make_dynamically_transformed_ncs_maps (c-interface-ncs.cc:299)
==4884==    by 0x813F5A1: make_dynamically_transformed_ncs_maps_by_widget (c-interface-ncs.cc:374)
==4884==    by 0x81E5C04: on_ncs_maps_ok_button_clicked (callbacks.c:5746)
==4884==    by 0x509D9D8: g_cclosure_marshal_VOID__VOID (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x509062A: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A1102: (within /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A2626: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A27E8: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884== 
==4884== Invalid write of size 4
==4884==    at 0x824D440: molecule_class_info_t::ncs_averaged_maps(clipper::Xmap<float> const&, float) (molecule-class-info-ncs.cc:676)
==4884==    by 0x824D8ED: molecule_class_info_t::make_dynamically_transformed_maps(int, short, float) (molecule-class-info-ncs.cc:472)
==4884==    by 0x813EB8B: make_dynamically_transformed_ncs_maps (c-interface-ncs.cc:299)
==4884==    by 0x813F5A1: make_dynamically_transformed_ncs_maps_by_widget (c-interface-ncs.cc:374)
==4884==    by 0x81E5C04: on_ncs_maps_ok_button_clicked (callbacks.c:5746)
==4884==    by 0x509D9D8: g_cclosure_marshal_VOID__VOID (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x509062A: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A1102: (within /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A2626: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A27E8: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x4C32162: gtk_button_clicked (in /usr/lib/libgtk-x11-2.0.so.0.1000.11)
==4884==    by 0x4C33DAD: (within /usr/lib/libgtk-x11-2.0.so.0.1000.11)
==4884==  Address 0x79DE3E8 is 0 bytes after a block of size 1,045,440 alloc'd
==4884==    at 0x4022DC5: operator new(unsigned) (vg_replace_malloc.c:163)
==4884==    by 0x824F144: clipper::Xmap<float>::Xmap(clipper::Xmap<float> const&) (new_allocator.h:88)
==4884==    by 0x824C089: molecule_class_info_t::ncs_averaged_maps(clipper::Xmap<float> const&, float) (molecule-class-info-ncs.cc:587)
==4884==    by 0x824D8ED: molecule_class_info_t::make_dynamically_transformed_maps(int, short, float) (molecule-class-info-ncs.cc:472)
==4884==    by 0x813EB8B: make_dynamically_transformed_ncs_maps (c-interface-ncs.cc:299)
==4884==    by 0x813F5A1: make_dynamically_transformed_ncs_maps_by_widget (c-interface-ncs.cc:374)
==4884==    by 0x81E5C04: on_ncs_maps_ok_button_clicked (callbacks.c:5746)
==4884==    by 0x509D9D8: g_cclosure_marshal_VOID__VOID (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x509062A: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A1102: (within /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A2626: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A27E8: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.1200.11)n
INFO:: 0 out of 228096 (0%) map points  were masked out of NCS average target volume,  chain A
INFO:: made 1 averaged map(s)
Map statistics: mean: -0.000679089 st.d: 0.480031
Map statistics: min: -1.48057, max: 4.66996


----
Sun May 13 16:23:53 BST 2007


what should active residue do when it is looking at (centred on) a water?


-----
Mon May 14 08:24:42 BST 2007


 add library file in "Do you want to run auto-save state file?" window


-----
Mon May 14 08:50:14 BST 2007

	Go To Atom fails in Gtk1 now.
	
Gtk-WARNING **: invalid cast from `GtkList' to `GtkTree'

Gtk-CRITICAL **: file gtktree.c: line 379 (gtk_tree_clear_items): assertion `GTK_IS_TREE (tree)' failed.

** WARNING **: Widget not found: go_to_atom_atom_list

Gtk-WARNING **: invalid cast from (NULL) pointer to `GtkList'

Gtk-CRITICAL **: file gtklist.c: line 1258 (gtk_list_clear_items): assertion `list != NULL' failed.

Gtk-WARNING **: invalid cast from `GtkList' to `GtkTree'

Gtk-CRITICAL **: file gtktree.c: line 200 (gtk_tree_append): assertion `GTK_IS_TREE (tree)' failed.

Gtk-CRITICAL **: file gtkwidget.c: line 3359 (gtk_widget_set_parent): assertion `parent != NULL' failed.

Gtk-WARNING **: invalid cast from (NULL) pointer to `GtkObject'
Segmentation fault (core dumped)

----
Tue May 15 23:59:45 BST 2007

have a look at this:

src/graphics-info-navigation.cc:            std::cout << "WARNING: (Programmer error) looking for atoms "

it was related (I'm pretty sure) with the AZ NCS crash.

-----
Wed May 16 09:27:21 BST 2007

	User pickable atoms:

	a function that registers interest in n atom selections and a
	function to call when it has them.  We test in
	graphics-info-defines whether such a function exists and has
	all the number of picks that it needs, if it does and it
	doesn't then collect them and pass them on when it has all
	it needs.  When the function has been called delete it from
	the queue/vector of such functions (umm, better do the
	deletion just before the function call so that if there is an
	error in the scm function we don't jump away from the function
	deletion part).


------
Thu May 17 18:20:51 BST 2007

Christopher Rife:

I've noticed that when using "NCS Control" in Coot, it behaves differently
depending on which chain I've chosen as the "master". When A is master, I can
click the display box on/off and it simply displays (or hides) the ghost chains
with no fuss. However, if I chosen a different chain as master, then each time
I turn the ghosts on it recalculates the entire alignment. This is rather
cumbersome with large structures...


-----
Wed May 16 20:30:02 BST 2007

	CA representation by default:

       Swanand	sg363@mole.bio.cam.ac.uk

