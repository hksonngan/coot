/*
 * DO NOT EDIT THIS FILE - it is generated by Glade.
 */


#ifdef HAVE_CONFIG_H
#  include <config.h>
#endif

#include <sys/types.h>
#include <sys/stat.h>

#if defined _MSC_VER
#include <string>
#else
#include <unistd.h>
#include <string.h>
#endif

#include <gdk/gdkkeysyms.h>
#include <gtk/gtk.h>

#include "seq-view-interface.h"
#include "c-interface.h"  // for set_sequence_view_is_displayed (thank you FR)

GtkWidget*
seq_lookup_widget                          (GtkWidget       *widget,
                                        const gchar     *widget_name)
{
  GtkWidget *parent, *found_widget;

  for (;;)
    {
      if (GTK_IS_MENU (widget))
        parent = gtk_menu_get_attach_widget (GTK_MENU (widget));
      else
        parent = widget->parent;
      if (parent == NULL)
        break;
      widget = parent;
    }

  found_widget = (GtkWidget*) gtk_object_get_data (GTK_OBJECT (widget),
                                                   widget_name);
  if (!found_widget)
    g_warning ("Widget not found: %s", widget_name);
  return found_widget;
}

GtkWidget*
create_sequence_view_dialog (void)
{
  GtkWidget *sequence_view_dialog;
  GtkWidget *dialog_vbox1;
  GtkWidget *sequence_view_scrolledwindow;
  GtkWidget *dialog_action_area1;
  GtkWidget *hbox1;
  GtkWidget *sequence_view_close_button;

  sequence_view_dialog = gtk_dialog_new ();
  gtk_object_set_data (GTK_OBJECT (sequence_view_dialog), "sequence_view_dialog", sequence_view_dialog);
  gtk_window_set_title (GTK_WINDOW (sequence_view_dialog), "Sequence View");
  gtk_window_set_policy (GTK_WINDOW (sequence_view_dialog), TRUE, TRUE, FALSE);

  dialog_vbox1 = GTK_DIALOG (sequence_view_dialog)->vbox;
  gtk_object_set_data (GTK_OBJECT (sequence_view_dialog), "dialog_vbox1", dialog_vbox1);
  gtk_widget_show (dialog_vbox1);

  sequence_view_scrolledwindow = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_ref (sequence_view_scrolledwindow);
  gtk_object_set_data_full (GTK_OBJECT (sequence_view_dialog), "sequence_view_scrolledwindow", sequence_view_scrolledwindow,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (sequence_view_scrolledwindow);
  gtk_box_pack_start (GTK_BOX (dialog_vbox1), sequence_view_scrolledwindow, TRUE, TRUE, 0);

  dialog_action_area1 = GTK_DIALOG (sequence_view_dialog)->action_area;
  gtk_object_set_data (GTK_OBJECT (sequence_view_dialog), "dialog_action_area1", 
		       dialog_action_area1);
  gtk_widget_show (dialog_action_area1);
  gtk_container_set_border_width (GTK_CONTAINER (dialog_action_area1), 10);

  hbox1 = gtk_hbox_new (FALSE, 0);
  gtk_widget_ref (hbox1);
  gtk_object_set_data_full (GTK_OBJECT (sequence_view_dialog), "hbox1", hbox1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (hbox1);
  gtk_box_pack_start (GTK_BOX (dialog_action_area1), hbox1, TRUE, TRUE, 0);

  sequence_view_close_button = gtk_button_new_with_label ("  Close ");
  gtk_widget_ref (sequence_view_close_button);
  gtk_object_set_data_full (GTK_OBJECT (sequence_view_dialog), 
			    "sequence_view_close_button", sequence_view_close_button,
                            (GtkDestroyNotify) gtk_widget_unref);

  gtk_signal_connect (GTK_OBJECT(sequence_view_close_button), "clicked",
		      GTK_SIGNAL_FUNC(on_sequence_view_close_button_clicked),
		      NULL);

  gtk_signal_connect (GTK_OBJECT (sequence_view_dialog), "destroy",
                      GTK_SIGNAL_FUNC (on_sequence_view_dialog_destroy),
                      sequence_view_dialog);

  gtk_widget_show (sequence_view_close_button);
  gtk_box_pack_start (GTK_BOX (hbox1), sequence_view_close_button, TRUE, TRUE, 0);

  return sequence_view_dialog;
}

void
on_sequence_view_close_button_clicked     (GtkButton *button,
					   gpointer         user_data)
{
   GtkWidget *window = seq_lookup_widget(GTK_WIDGET(button), "sequence_view_dialog");
   gtk_widget_destroy(window);
}


void
on_sequence_view_dialog_destroy            (GtkObject       *object,
                                            gpointer         user_data)
{
   GtkWidget *dialog = (GtkWidget *) user_data;
   int imol = GPOINTER_TO_INT(gtk_object_get_user_data(GTK_OBJECT(dialog)));
/*    printf("debug:: on_sequence_view_dialog_destroy unsetting sequence view for molecule %d using widget %ld\n", imol, dialog); */
   set_sequence_view_is_displayed(0, imol);
}
